<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Expecting.Ai – Blog Topic Sender</title>
  <style>
    :root { --brand:#7b5cff; }
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; background:#f7f7fb; margin:0; }
    .wrap { max-width: 720px; margin: 6rem auto; background:#fff; padding: 2rem 2.25rem; border-radius: 16px; box-shadow: 0 10px 30px rgba(0,0,0,.06); }
    h1 { margin: 0 0 1rem 0; font-size: 1.6rem; }
    label { font-weight: 600; display:block; margin-bottom:.5rem; }
    input[type="text"] { width:100%; padding: .9rem 1rem; border:1px solid #dadce0; border-radius: 12px; font-size:1rem; outline: none; }
    input[type="text"]:focus { border-color: var(--brand); box-shadow: 0 0 0 3px rgba(123,92,255,.15); }
    button { margin-top: 1rem; padding:.9rem 1.25rem; border-radius: 12px; border:none; background: var(--brand); color:#fff; font-weight:700; cursor:pointer; }
    button:disabled { background:#b9b6ff; cursor:not-allowed; }
    .status { margin-top:1rem; min-height:1.25rem; color:#333; }
    .ok { color: #0a7f3e; }
    .err { color: #b00020; }
  </style>
</head>
<body>
  <div class="wrap">
    <h1>Expecting.Ai – Create Blog Post</h1>

    <form id="blogForm" class="form">
      <label for="topic">Blog topic</label>
      <input type="text" id="topic" name="topic" placeholder="e.g., How to choose an egg donor" required />
      <button type="submit" id="sendBtn">Generate Blog</button>
    </form>

    <div class="status" id="status"></div>
  </div>

<script>
(function(){
  const form = document.getElementById('blogForm');
  const statusEl = document.getElementById('status');
  const btn = document.getElementById('sendBtn');
  const webhookUrl = 'https://hook.eu2.make.com/2886vxuv2ykd2sep3ld57xhhwecwr4ua';

  function setStatus(msg, cls){
    statusEl.className = 'status ' + (cls || '');
    statusEl.textContent = msg;
  }

  form.addEventListener('submit', async function(e){
    e.preventDefault();
    const topic = document.getElementById('topic').value.trim();

    if (!topic){ setStatus('Please enter a topic.', 'err'); return; }

    btn.disabled = true;
    setStatus('Sending topic…');

    try{
      const res = await fetch(webhookUrl, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ topic })
      });

      if (res.ok){
        setStatus('✅ Topic sent successfully!', 'ok');
        form.reset();
      } else {
        const res2 = await fetch(webhookUrl, {
          method: 'POST',
          headers: { 'Content-Type': 'application/x-www-form-urlencoded' },
          body: new URLSearchParams({ topic })
        });
        if (res2.ok){
          setStatus('✅ Sent successfully!', 'ok');
          form.reset();
        } else {
          setStatus('❌ Failed to send. Is the scenario running?', 'err');
        }
      }
    } catch(err){
      setStatus('❌ Error: ' + err.message, 'err');
    } finally {
      btn.disabled = false;
    }
  });
})();
</script>
</body>
</html>
